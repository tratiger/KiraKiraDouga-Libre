/**
 * 動画弾幕に関する設定
 * インターフェース：GET https://api.bilibili.com/x/v2/dm/web/view?type=1&oid=${AV番号}&pid=${パート番号}
 * リポジトリ：https://github.com/MoyuScript/bilibili-protobuf
 * 作者：MoyuScript
 */

syntax = "proto3";

package bilibili.view;

/** 
 * 弾幕セグメント設定
 */
message SegmentConfig {
	// 各セグメントの長さ（ミリ秒）
	optional int64 page_size = 1;
	// 合計セグメント数
	optional int64 total = 2;
}

/** 
 * 現在用途不明
 */
message FlagConfig {
	optional int32 rec_flag = 1;
	optional string rec_text = 2;
	optional int32 rec_switch = 3;
}

/**
 * 弾幕スタイル設定
 */
message WebPlayerConfig {
	// 弾幕を有効にするか
	optional bool dm_switch = 1;
	// スマートクラウド弾幕フィルターを有効にするか
	optional bool ai_switch = 2;
	// スマートクラウドフィルターレベル
	optional int32 ai_level = 3;
	// 上部固定弾幕を表示するか
	optional bool display_top = 4;
	// スクロール弾幕を表示するか
	optional bool display_scroll = 5;
	// 下部固定弾幕を表示するか
	optional bool display_bottom = 6;
	// カラー弾幕を表示するか
	optional bool display_color = 7;
	// 高度な弾幕を表示するか
	optional bool display_special = 8;
	// 字幕保護を有効にするか
	optional bool prevent_shade = 9;
	// 弾幕マスク（人物を隠さない）を有効にするか
	optional bool dmask = 10;
	// 弾幕の不透明度
	optional float opacity = 11;
	// 弾幕表示エリア
	optional int32 dm_area = 12;
	// 弾幕速度
	optional float speed_plus = 13;
	// 弾幕フォントサイズ
	optional float font_size = 14;
	// 画面サイズに応じて弾幕サイズをスケーリングするか
	optional bool screen_sync = 15;
	// 再生速度に弾幕速度を同期させるか
	optional bool speed_sync = 16;
	// 弾幕フォント
	optional string font_family = 17;
	// 太字を有効にするか
	optional bool bold = 18;
	// 縁取りタイプ
	optional int32 font_border = 19;
	// レンダリングタイプ
	optional string draw_type = 20;
}

/**
 * コマンド弾幕内容
 */
message CommandDanmaku {
	// 弾幕数値ID
	optional int64 id = 1;
	// 所属動画のパート番号
	optional int64 oid = 2;
	// 送信者UID
	optional int64 mid = 3;
	// コマンド
	optional string command = 4;
	// 内容
	optional string content = 5;
	// 出現プログレス
	optional int32 progress = 6;
	// 送信時間
	optional string ctime = 7;
	// 修正時間
	optional string mtime = 8;
	// 追加JSON情報
	optional string extra = 9;
	// 弾幕文字列ID
	optional string id_str = 10;
}

/**
 * 全体設定ルートノード
 */
message Root {
	// 状態。1の場合、動画弾幕はオフ
	optional int32 state = 1;
	// 弾幕入力欄のプレースホルダーテキスト
	optional string text = 2;
	// 弾幕リストのプレースホルダーテキスト
	optional string text_side = 3;
	// 弾幕セグメント設定
	optional SegmentConfig dm_seg = 4;
	optional FlagConfig flag = 5;
	// 高度な弾幕リソースアドレス配列
	repeated string special_dms = 6;
	optional bool check_box = 7;
	// 現在の弾幕数
	optional int64 count = 8;
	// コマンド弾幕配列
	repeated CommandDanmaku command_dms = 9;
	// 弾幕スタイル設定
	optional WebPlayerConfig dm_settings = 10;
}
